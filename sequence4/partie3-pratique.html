<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tests Unitaires Angular - Partie 3</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f3f4f6; height: 100vh; overflow: hidden; }
        .presentation { display: flex; flex-direction: column; height: 100vh; }
        .header { background: #1e3a8a; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        .slide-container { flex: 1; padding: 2rem; overflow: hidden; }
        .slide { background: white; height: 100%; padding: 3rem; border-radius: 0.5rem; box-shadow: 0 20px 50px rgba(0,0,0,0.3); overflow-y: auto; display: none; }
        .slide.active { display: block; }
        .navigation { background: #e5e7eb; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        button { padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        button:disabled { background: #d1d5db; color: #9ca3af; cursor: not-allowed; }
        button:not(:disabled) { background: #2563eb; color: white; }
        button:not(:disabled):hover { background: #1d4ed8; }
        .indicators { display: flex; gap: 0.5rem; }
        .indicator { width: 12px; height: 12px; border-radius: 50%; background: #9ca3af; cursor: pointer; transition: all 0.3s; }
        .indicator.active { background: #2563eb; width: 32px; border-radius: 6px; }
        h2 { font-size: 2.5rem; color: #1e3a8a; margin-bottom: 2rem; }
        h3 { font-size: 1.5rem; margin-bottom: 1rem; }
        .code-block { background: #1f2937; color: #e5e7eb; padding: 1.5rem; border-radius: 0.5rem; font-family: 'Courier New', monospace; margin: 1.5rem 0; overflow-x: auto; line-height: 1.6; }
        .exercise-box { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 0.5rem; margin: 1.5rem 0; }
        .alert { padding: 1.5rem; border-left: 8px solid; margin: 1.5rem 0; border-radius: 0 0.5rem 0.5rem 0; }
        .alert-blue { background: #dbeafe; border-color: #2563eb; }
        .alert-yellow { background: #fef9c3; border-color: #eab308; }
        .alert-red { background: #fee2e2; border-color: #ef4444; }
        .alert-green { background: #dcfce7; border-color: #22c55e; }
        ul { list-style: none; padding-left: 1.5rem; }
        li { margin: 0.75rem 0; font-size: 1.1rem; }
        code { background: #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-family: 'Courier New', monospace; color: #1f2937; }
        .warning-box { background: #fef2f2; border: 3px solid #ef4444; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; }
        table { width: 100%; border-collapse: collapse; margin: 2rem 0; }
        th { background: #1e3a8a; color: white; padding: 1rem; text-align: left; }
        td { padding: 1rem; border-bottom: 1px solid #e5e7eb; }
        tr:nth-child(even) { background: #f9fafb; }
    </style>
</head>
<body>
    <div class="presentation">
        <div class="header">
            <strong>Tests Unitaires Angular - Partie 3 : Pratique Guid√©e</strong>
            <div id="slideCounter">Slide 21 / 32</div>
        </div>
        
        <div class="slide-container">

            <!-- Slide 21 -->
            <div class="slide active">
                <h2>Exercice 1 - Test simple sans Angular</h2>
                
                <div class="exercise-box">
                    <h3 style="color: white; font-size: 2rem;">üéØ Objectif</h3>
                    <p style="font-size: 1.3rem; margin-top: 1rem;">Tester une classe TypeScript pure (sans TestBed)</p>
                </div>

                <div class="warning-box">
    <h3>üí° Conseil : Isoler vos tests avec fdescribe()</h3>
    <p>Quand vous avez beaucoup de tests, utilisez <code>fdescribe()</code> pour ex√©cuter uniquement un groupe de tests :</p>
    <pre class="code-light"><code>// Remplacer describe par fdescribe
// Tous les autres describe() seront ignor√©s !</code></pre>
    <p><strong>Utilit√© :</strong> Parfait pour se concentrer sur un seul test quand vous en avez des dizaines qui √©chouent.</p>
</div>
                
                <div style="background: #fef3c7; border: 3px solid #f59e0b; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <h3 style="color: #92400e;">üìù Instructions</h3>
                    <ol style="margin-top: 1rem; font-size: 1.1rem; margin-left: 1.5rem;">
                        <li>Cr√©er le fichier : <code>task-highlight.simple.spec.ts</code></li>
                        <li>Importer la classe TaskHighlight</li>
                        <li>Tester l'initialisation du titre</li>
                        <li>Tester la modification du titre</li>
                    </ol>
                </div>
                
                <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 1rem; line-height: 1.8; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { TaskHighlight } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'./task-highlight'</span>;

            <span style="color: #8b5cf6;">describe</span>(<span style="color: #059669;">'TaskHighlight'</span>, () => {

            <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait initialiser title avec une cha√Æne vide'</span>, () => {
                <span style="color: #0ea5e9;">const</span> component = <span style="color: #0ea5e9;">new</span> TaskHighlight();
                <span style="color: #8b5cf6;">expect</span>(component.title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">''</span>);
            });

            <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait permettre de changer le titre'</span>, () => {
                <span style="color: #0ea5e9;">const</span> component = <span style="color: #0ea5e9;">new</span> TaskHighlight();
                component.title = <span style="color: #059669;">'T√¢che en avant'</span>;
                <span style="color: #8b5cf6;">expect</span>(component.title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">'T√¢che en avant'</span>);
            });

            });</pre>
                </div>
                
                <div class="alert alert-green">
                    <strong>‚úÖ Points cl√©s :</strong> Pas besoin de TestBed ‚Ä¢ On instancie directement avec <code>new</code> ‚Ä¢ Tests rapides et simples
                </div>
            </div>

            <!-- Slide 22 - Diagnostiquer les erreurs de tests -->
            <div class="slide">
                <h1>üîç Diagnostiquer les erreurs de tests</h1>
                
                <div class="warning-box">
                    <h3>‚ùå Erreur courante : NullInjectorError</h3>
                    <pre class="code-light"><code>NullInjectorError: No provider for TaskService!</code></pre>
                    <p><strong>Cause :</strong> Le composant a besoin d'un service qui n'est pas fourni dans le test.</p>
                    <p><strong>Solution :</strong></p>
                    <pre class="code-light"><code>TestBed.configureTestingModule({
            imports: [MonComposant],
            providers: [TaskService]  // üÜï Ajouter le service manquant
            });</code></pre>
                </div>

                <div class="info-box">
                    <h3>‚ùå Erreur : Can't bind to 'ngModel'</h3>
                    <pre class="code-light"><code>Can't bind to 'ngModel' since it isn't a known property of 'input'</code></pre>
                    <p><strong>Cause :</strong> FormsModule n'est pas import√©.</p>
                    <p><strong>Solution :</strong></p>
                    <pre class="code-light"><code>import { FormsModule } from '@angular/forms';

            TestBed.configureTestingModule({
            imports: [MonComposant, FormsModule]  // üÜï
            });</code></pre>
                </div>

                <div class="highlight">
                    <h3>‚ùå Erreur : No provider for HttpClient</h3>
                    <pre class="code-light"><code>NullInjectorError: No provider for HttpClient!</code></pre>
                    <p><strong>Cause :</strong> Le service utilise HttpClient mais il n'est pas fourni.</p>
                    <p><strong>Solution :</strong></p>
                    <pre class="code-light"><code>import { provideHttpClient } from '@angular/common/http';

            TestBed.configureTestingModule({
            imports: [MonComposant],
            providers: [
                MonService,
                provideHttpClient()  // üÜï
            ]
            });</code></pre>
                </div>

                <div class="success-box">
                    <h3>üí° M√©thodologie de d√©bogage</h3>
                    <ol>
                        <li><strong>Lire l'erreur</strong> : Elle indique souvent ce qui manque</li>
                        <li><strong>Isoler le test</strong> : Utiliser <code>fdescribe()</code> pour se concentrer</li>
                        <li><strong>Ajouter les d√©pendances</strong> : Providers, imports, etc.</li>
                        <li><strong>Relancer</strong> : Karma se rafra√Æchit automatiquement</li>
                    </ol>
                </div>
            </div>
                       
               <!-- Slide 23 -->
            <div class="slide">
                <h2>Exercice 2 - Composant avec TestBed</h2>
                
                <div class="exercise-box">
                    <h3 style="color: white; font-size: 2rem;">üéØ Objectif</h3>
                    <p style="font-size: 1.3rem; margin-top: 1rem;">Tester TaskHighlight avec @Input et le DOM</p>
                </div>
                
                <div style="background: #fef3c7; border: 3px solid #f59e0b; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <h3 style="color: #92400e;">üìã Nouveaut√© : On utilise TestBed</h3>
                    <p style="font-size: 1.1rem; margin-top: 0.5rem;">
                        Contrairement √† l'exercice pr√©c√©dent ici on teste un <strong>composant Angular</strong> avec son template. 
                        On doit donc utiliser <strong>TestBed</strong> pour compiler le composant et acc√©der au DOM.
                    </p>
                </div>
                
                <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.8; color: #1e293b;"><span style="color: #8b5cf6;">describe</span>(<span style="color: #059669;">'TaskHighlight'</span>, () => {
            <span style="color: #0ea5e9;">let</span> component: TaskHighlight;
            <span style="color: #0ea5e9;">let</span> fixture: ComponentFixture&lt;TaskHighlight&gt;;

            <span style="color: #8b5cf6;">beforeEach</span>(<span style="color: #0ea5e9;">async</span> () => {
                <span style="color: #6b7280;">// Configuration du module de test</span>
                <span style="color: #0ea5e9;">await</span> TestBed.<span style="color: #8b5cf6;">configureTestingModule</span>({
                imports: [TaskHighlight]
                }).<span style="color: #8b5cf6;">compileComponents</span>();

                <span style="color: #6b7280;">// Cr√©ation du composant</span>
                fixture = TestBed.<span style="color: #8b5cf6;">createComponent</span>(TaskHighlight);
                component = fixture.componentInstance;
            });

            <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait afficher le titre dans le DOM'</span>, () => {
                <span style="color: #6b7280;">// ARRANGE : D√©finir le titre</span>
                component.title = <span style="color: #059669;">'Ma t√¢che'</span>;
                
                <span style="color: #6b7280;">// ACT : Mettre √† jour le template</span>
                fixture.<span style="color: #8b5cf6;">detectChanges</span>(); <span style="color: #dc2626;">// ‚ö†Ô∏è IMPORTANT !</span>

                <span style="color: #6b7280;">// ASSERT : V√©rifier le DOM</span>
                <span style="color: #0ea5e9;">const</span> compiled = fixture.nativeElement;
                <span style="color: #8b5cf6;">expect</span>(compiled.<span style="color: #8b5cf6;">querySelector</span>(<span style="color: #059669;">'h2'</span>)?.textContent)
                .<span style="color: #8b5cf6;">toContain</span>(<span style="color: #059669;">'Ma t√¢che'</span>);
            });
            });</pre>
                </div>
                
                <div style="background: #fee2e2; border: 3px solid #ef4444; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <h3 style="color: #7f1d1d; font-size: 1.3rem; margin-bottom: 1rem;">‚ö†Ô∏è Point crucial √† retenir</h3>
                    <p style="font-size: 1.1rem; color: #991b1b;">
                        Toujours appeler <code style="background: #fef2f2; color: #dc2626; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">fixture.detectChanges()</code> apr√®s avoir modifi√© une propri√©t√© du composant !
                    </p>
                    <p style="font-size: 1rem; color: #7f1d1d; margin-top: 0.5rem;">
                        Sans cet appel, le template HTML ne sera jamais mis √† jour et votre test √©chouera.
                    </p>
                </div>
                
                <div style="background: #dbeafe; border-left: 8px solid #3b82f6; padding: 1.5rem; border-radius: 0 0.5rem 0.5rem 0;">
                    <h3 style="color: #1e40af;">üîë Les 3 √©tapes cl√©s</h3>
                    <div style="margin-top: 1rem; display: grid; gap: 0.75rem;">
                        <div style="background: white; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #3b82f6;">
                            <strong style="color: #1e40af;">1. Modifier</strong> ‚Üí <code>component.title = 'Ma t√¢che'</code>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #3b82f6;">
                            <strong style="color: #1e40af;">2. Actualiser</strong> ‚Üí <code>fixture.detectChanges()</code>
                        </div>
                        <div style="background: white; padding: 1rem; border-radius: 0.5rem; border-left: 4px solid #3b82f6;">
                            <strong style="color: #1e40af;">3. V√©rifier</strong> ‚Üí <code>expect(...).toContain('Ma t√¢che')</code>
                        </div>
                    </div>
                </div>
            </div>
      

       <!-- Slide 24 - Tester un service avec TestBed -->
        <div class="slide">
            <h2>Tester un service avec TestBed</h2>
            
            <div class="exercise-box">
                <h3 style="color: white; font-size: 2rem;">üß™ Objectif</h3>
                <p style="font-size: 1.3rem; margin-top: 1rem;">Tester le service Task avec TestBed</p>
            </div>

            <h3 style="margin-top: 2rem;">Exemple de test</h3>

            <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { TestBed } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'@angular/core/testing'</span>;
        <span style="color: #0ea5e9;">import</span> { Task } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'./task.service'</span>;

        <span style="color: #8b5cf6;">fdescribe</span>(<span style="color: #059669;">'Task Service'</span>, () => {
        <span style="color: #0ea5e9;">let</span> service: Task;

        <span style="color: #8b5cf6;">beforeEach</span>(() => {
            <span style="color: #64748b;">// Configurer TestBed</span>
            TestBed.configureTestingModule({
            providers: [Task]
            });
            
            <span style="color: #64748b;">// R√©cup√©rer le service</span>
            service = TestBed.inject(Task);
            service.clearTasks();  <span style="color: #64748b;">// √âtat propre</span>
        });

        <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait √™tre cr√©√©'</span>, () => {
            <span style="color: #8b5cf6;">expect</span>(service).<span style="color: #8b5cf6;">toBeTruthy</span>();
        });

        <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait ajouter une t√¢che'</span>, () => {
            service.addTask(<span style="color: #059669;">'Apprendre les tests'</span>);
            
            <span style="color: #0ea5e9;">const</span> tasks = service.getTasks();
            <span style="color: #8b5cf6;">expect</span>(tasks.length).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">1</span>);
            <span style="color: #8b5cf6;">expect</span>(tasks[<span style="color: #dc2626;">0</span>].title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">'Apprendre les tests'</span>);
            <span style="color: #8b5cf6;">expect</span>(tasks[<span style="color: #dc2626;">0</span>].completed).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">false</span>);
        });

        <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait supprimer une t√¢che'</span>, () => {
            service.addTask(<span style="color: #059669;">'T√¢che temporaire'</span>);
            <span style="color: #0ea5e9;">const</span> taskId = service.getTasks()[<span style="color: #dc2626;">0</span>].id;
            
            service.deleteTask(taskId);
            
            <span style="color: #8b5cf6;">expect</span>(service.getTasks().length).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">0</span>);
        });

        <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait marquer une t√¢che comme termin√©e'</span>, () => {
            service.addTask(<span style="color: #059669;">'T√¢che √† terminer'</span>);
            <span style="color: #0ea5e9;">const</span> taskId = service.getTasks()[<span style="color: #dc2626;">0</span>].id;
            
            service.toggleTask(taskId);
            
            <span style="color: #0ea5e9;">const</span> task = service.getTasks()[<span style="color: #dc2626;">0</span>];
            <span style="color: #8b5cf6;">expect</span>(task.completed).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">true</span>);
        });
        });
            </div>

            <div class="alert alert-blue">
                <strong>üí° √Ä retenir :</strong> TestBed.configureTestingModule() cr√©e l'environnement ‚Ä¢ TestBed.inject() r√©cup√®re le service ‚Ä¢ clearTasks() repart d'un √©tat propre
            </div>
             <h3 style="margin-top: 2rem;">üìù M√©thodes n√©cessaires</h3>
                <p>Ajoutez ces m√©thodes dans <code>task.service.ts</code> :</p>

                <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
                    <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #8b5cf6;">getTasks</span>(): TaskItem[] {
<span style="color: #0ea5e9;">return</span> <span style="color: #0ea5e9;">this</span>.tasksSubject.value;
}

<span style="color: #8b5cf6;">clearTasks</span>(): <span style="color: #0ea5e9;">void</span> {
<span style="color: #0ea5e9;">this</span>.tasksSubject.next([]);
<span style="color: #0ea5e9;">this</span>.nextId = <span style="color: #dc2626;">1</span>;
}
</pre>
                </div>

               

               
        </div>

           

        

            <!-- Slide 25 -->
            <div class="slide">
                <h2>D√©cortiquer beforeEach avec TestBed</h2>
                <div style="background: #fef3c7; border: 3px solid #f59e0b; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h3 style="color: #92400e;">üìñ Analyse ligne par ligne</h3>
                </div>
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;">
                    <strong style="color: #7c3aed;">1. TestBed.configureTestingModule()</strong>
                    <p>‚Ä¢ Cr√©e un mini-module de test Angular</p>
                    <p>‚Ä¢ D√©clare le composant √† tester</p>
                </div>
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;">
                    <strong style="color: #7c3aed;">2. .compileComponents()</strong>
                    <p>‚Ä¢ Angular compile le template et le CSS</p>
                </div>
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;">
                    <strong style="color: #7c3aed;">3. fixture = TestBed.createComponent()</strong>
                    <p>‚Ä¢ Cr√©e une vraie instance du composant</p>
                </div>
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;">
                    <strong style="color: #7c3aed;">4. component = fixture.componentInstance</strong>
                    <p>‚Ä¢ R√©cup√®re la classe du composant</p>
                </div>
                <div style="background: white; border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0;">
                    <strong style="color: #7c3aed;">5. fixture.detectChanges()</strong>
                    <p>‚Ä¢ Rend le template initial</p>
                </div>
            </div>


<!-- Slide 26 - Tester avec un Mock -->
<div class="slide">
    <h2>Tester avec un Mock (simulation)</h2>
    
    <div class="exercise-box">
        <h3 style="color: white; font-size: 2rem;">üéØ Objectif</h3>
        <p style="font-size: 1.3rem; margin-top: 1rem;">Comprendre comment tester un composant qui d√©pend d'un service</p>
    </div>

    <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107;">
        <strong>ü§î Le probl√®me :</strong>
        <p style="margin-top: 10px;">Le composant <code>TasksPage</code> utilise le service <code>Task</code>. Si on teste le composant, on teste aussi le service en m√™me temps !</p>
        <p style="margin-top: 10px;"><strong>‚Üí Ce n'est plus un test unitaire pur.</strong></p>
    </div>

    <div class="alert alert-success" style="background: #d4edda; border-left: 4px solid #28a745;">
        <strong>‚úÖ La solution : cr√©er un Mock</strong>
        <p style="margin-top: 10px;">Un <strong>Mock</strong> est une <strong>fausse version</strong> d'un service qui simule son comportement sans vraiment faire le travail.</p>
    </div>

    <h3 style="margin-top: 2rem;">Qu'est-ce qu'un Mock ?</h3>

    <div class="alert alert-info">
        <strong>üí° Analogie :</strong>
        <p style="margin-top: 10px;">Imaginez que vous testez une voiture :</p>
        <ul style="margin-left: 20px; margin-top: 10px;">
            <li>üöó <strong>Sans mock :</strong> Vous utilisez un vrai moteur (consomme de l'essence, fait du bruit)</li>
            <li>üé≠ <strong>Avec mock :</strong> Vous mettez un moteur factice qui simule juste le comportement</li>
        </ul>
        <p style="margin-top: 10px;">Le mock permet de tester la voiture <strong>isol√©ment</strong>, sans d√©pendre du moteur r√©el.</p>
    </div>

    <h3 style="margin-top: 2rem;">Exemple : Tester TasksPage avec un Mock</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.8rem; line-height: 1.6; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { ComponentFixture, TestBed } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'@angular/core/testing'</span>;
<span style="color: #0ea5e9;">import</span> { TasksPage } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'./tasks-page'</span>;
<span style="color: #0ea5e9;">import</span> { Task, TaskItem } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'../../../core/services/task'</span>;
<span style="color: #0ea5e9;">import</span> { BehaviorSubject } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'rxjs'</span>;

<span style="color: #64748b;">// üé≠ 1Ô∏è‚É£ CR√âER LE MOCK (fausse version du service)</span>
<span style="color: #0ea5e9;">class</span> <span style="color: #8b5cf6;">MockTaskService</span> {
  <span style="color: #0ea5e9;">private</span> tasksSubject = <span style="color: #0ea5e9;">new</span> BehaviorSubject&lt;TaskItem[]&gt;([]);
  tasks$ = <span style="color: #0ea5e9;">this</span>.tasksSubject.asObservable();

  <span style="color: #8b5cf6;">addTask</span>(title: <span style="color: #0ea5e9;">string</span>): <span style="color: #0ea5e9;">void</span> {
    <span style="color: #0ea5e9;">const</span> newTask = { id: <span style="color: #dc2626;">1</span>, title, completed: <span style="color: #dc2626;">false</span> };
    <span style="color: #0ea5e9;">const</span> tasks = <span style="color: #0ea5e9;">this</span>.tasksSubject.value;
    <span style="color: #0ea5e9;">this</span>.tasksSubject.next([...tasks, newTask]);
  }

  <span style="color: #8b5cf6;">deleteTask</span>(id: <span style="color: #0ea5e9;">number</span>): <span style="color: #0ea5e9;">void</span> {
    <span style="color: #64748b;">// Simulation simple, pas de vraie logique</span>
  }
}

<span style="color: #8b5cf6;">fdescribe</span>(<span style="color: #059669;">'TasksPage avec Mock'</span>, () => {
  <span style="color: #0ea5e9;">let</span> component: TasksPage;
  <span style="color: #0ea5e9;">let</span> fixture: ComponentFixture&lt;TasksPage&gt;;
  <span style="color: #0ea5e9;">let</span> mockService: MockTaskService;

  <span style="color: #8b5cf6;">beforeEach</span>(<span style="color: #0ea5e9;">async</span> () => {
    <span style="color: #0ea5e9;">await</span> TestBed.configureTestingModule({
      imports: [TasksPage],
      providers: [
        <span style="color: #64748b;">// üé≠ 2Ô∏è‚É£ UTILISER LE MOCK au lieu du vrai service</span>
        { provide: Task, useClass: MockTaskService }
      ]
    }).compileComponents();

    fixture = TestBed.createComponent(TasksPage);
    component = fixture.componentInstance;
    mockService = TestBed.inject(Task) <span style="color: #0ea5e9;">as any</span>;
    fixture.detectChanges();
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait utiliser le mock pour ajouter une t√¢che'</span>, () => {
    <span style="color: #64748b;">// ACT : On appelle la m√©thode du composant</span>
    component.addTask(<span style="color: #059669;">'T√¢che mock√©e'</span>);

    <span style="color: #64748b;">// ASSERT : Le mock a bien simul√© l'ajout</span>
    mockService.tasks$.subscribe(tasks => {
      <span style="color: #8b5cf6;">expect</span>(tasks.length).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">1</span>);
      <span style="color: #8b5cf6;">expect</span>(tasks[<span style="color: #dc2626;">0</span>].title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">'T√¢che mock√©e'</span>);
    });
  });
});</pre>
    </div>

    <div class="alert alert-success">
        <strong>üé≠ O√π est le Mock dans ce code ?</strong>
        <table style="width: 100%; margin-top: 15px; border-collapse: collapse;">
            <tr style="background: #e8f5e9;">
                <td style="padding: 10px; border: 1px solid #c8e6c9; font-weight: bold;">Emplacement</td>
                <td style="padding: 10px; border: 1px solid #c8e6c9; font-weight: bold;">Explication</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e0e0e0;"><code>class MockTaskService</code></td>
                <td style="padding: 10px; border: 1px solid #e0e0e0;">C'est le Mock ! La fausse version du service</td>
            </tr>
            <tr style="background: #f5f5f5;">
                <td style="padding: 10px; border: 1px solid #e0e0e0;"><code>{ provide: Task, useClass: MockTaskService }</code></td>
                <td style="padding: 10px; border: 1px solid #e0e0e0;">On dit √† Angular d'utiliser le Mock au lieu du vrai service</td>
            </tr>
        </table>
    </div>

    <div class="alert alert-blue">
        <strong>üí° Avantages du Mock :</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li>‚úÖ <strong>Tests isol√©s</strong> : On teste uniquement le composant</li>
            <li>‚úÖ <strong>Tests rapides</strong> : Pas de vraie logique ex√©cut√©e</li>
            <li>‚úÖ <strong>Tests contr√¥lables</strong> : On d√©cide exactement ce que le mock fait</li>
        </ul>
    </div>

    <div class="alert alert-warning">
        <strong>‚ö†Ô∏è Quand utiliser un Mock ?</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li>‚úÖ Tests unitaires stricts (isoler compl√®tement)</li>
            <li>‚ùå Tests d'int√©gration (tester composant + service ensemble)</li>
        </ul>
        <p style="margin-top: 10px;">Dans notre cours, nous avons utilis√© le <strong>vrai service</strong> car c'est plus simple et suffisant pour apprendre.</p>
    </div>
</div>







        <!-- Slide 27 - Tester un composant avec @Input -->
<div class="slide">
    <h2>Tester un composant avec @Input</h2>
    
    <div class="exercise-box">
        <h3 style="color: white; font-size: 2rem;">üéØ Objectif</h3>
        <p style="font-size: 1.3rem; margin-top: 1rem;">Tester le composant TaskHighlight avec son @Input</p>
    </div>

    <div class="alert alert-info">
        <strong>üìò Rappel :</strong> Le composant <code>TaskHighlight</code> a √©t√© cr√©√© en s√©quence 3. Il re√ßoit un titre via <code>@Input</code> et l'affiche.
    </div>

    <h3 style="margin-top: 2rem;">Le composant TaskHighlight</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { Component, Input } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'@angular/core'</span>;

<span style="color: #8b5cf6;">@Component</span>({
  selector: <span style="color: #059669;">'app-task-highlight'</span>,
  template: <span style="color: #059669;">`
    &lt;div class="task-highlight"&gt;
      &lt;h3&gt;T√¢che mise en avant&lt;/h3&gt;
      &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;/div&gt;
  `</span>
})
<span style="color: #0ea5e9;">export class</span> <span style="color: #8b5cf6;">TaskHighlight</span> {
  <span style="color: #8b5cf6;">@Input</span>() title = <span style="color: #059669;">''</span>;
}</pre>
    </div>

    <h3 style="margin-top: 2rem;">Test du composant</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { ComponentFixture, TestBed } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'@angular/core/testing'</span>;
<span style="color: #0ea5e9;">import</span> { TaskHighlight } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'./task-highlight.component'</span>;

<span style="color: #8b5cf6;">fdescribe</span>(<span style="color: #059669;">'TaskHighlight Component'</span>, () => {
  <span style="color: #0ea5e9;">let</span> component: TaskHighlight;
  <span style="color: #0ea5e9;">let</span> fixture: ComponentFixture&lt;TaskHighlight&gt;;

  <span style="color: #8b5cf6;">beforeEach</span>(<span style="color: #0ea5e9;">async</span> () => {
    <span style="color: #0ea5e9;">await</span> TestBed.configureTestingModule({
      imports: [TaskHighlight]  <span style="color: #64748b;">// Standalone component</span>
    }).compileComponents();

    fixture = TestBed.createComponent(TaskHighlight);
    component = fixture.componentInstance;
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait √™tre cr√©√©'</span>, () => {
    <span style="color: #8b5cf6;">expect</span>(component).<span style="color: #8b5cf6;">toBeTruthy</span>();
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait afficher le titre pass√© en @Input'</span>, () => {
    <span style="color: #64748b;">// ARRANGE : D√©finir la valeur de @Input</span>
    component.title = <span style="color: #059669;">'Apprendre Angular'</span>;
    
    <span style="color: #64748b;">// ACT : D√©clencher la d√©tection de changements</span>
    fixture.detectChanges();
    
    <span style="color: #64748b;">// ASSERT : V√©rifier que le titre s'affiche</span>
    <span style="color: #0ea5e9;">const</span> element = fixture.nativeElement;
    <span style="color: #0ea5e9;">const</span> h2 = element.querySelector(<span style="color: #059669;">'h2'</span>);
    <span style="color: #8b5cf6;">expect</span>(h2.textContent).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">'Apprendre Angular'</span>);
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait avoir un titre vide par d√©faut'</span>, () => {
    <span style="color: #8b5cf6;">expect</span>(component.title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">''</span>);
  });
});</pre>
    </div>

    <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107;">
        <strong>üí° Comprendre l'@Input dans les tests :</strong>
        <p style="margin-top: 10px;">√âcrire <code>component.title = 'Apprendre Angular'</code> dans le test, c'est comme si on √©crivait dans un template :</p>
        <pre style="background: white; padding: 10px; border-radius: 4px; margin-top: 10px;"><code>&lt;app-task-highlight title="Apprendre Angular"&gt;&lt;/app-task-highlight&gt;</code></pre>
        <p style="margin-top: 10px;">Les deux font la m√™me chose : passer une valeur √† la propri√©t√© <code>@Input()</code> du composant.</p>
    </div>

    <div class="alert alert-success">
        <strong>üîë Concepts cl√©s :</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li><code>ComponentFixture</code> : Conteneur de test pour le composant</li>
            <li><code>fixture.componentInstance</code> : Acc√®s au composant TypeScript</li>
            <li><code>fixture.detectChanges()</code> : Force Angular √† mettre √† jour le DOM</li>
            <li><code>fixture.nativeElement</code> : Acc√®s au DOM HTML</li>
        </ul>
    </div>

    <div class="alert alert-blue">
        <strong>üí° √Ä retenir :</strong> On modifie la propri√©t√© <code>@Input</code> directement ‚Ä¢ On appelle <code>detectChanges()</code> pour mettre √† jour le DOM ‚Ä¢ On v√©rifie le rendu HTML avec <code>querySelector()</code>
    </div>
</div>
           <!-- Slide 28 - Tester un composant avec @Output -->
<div class="slide">
    <h2>Tester un composant avec @Output</h2>
    
    <div class="exercise-box">
        <h3 style="color: white; font-size: 2rem;">üéØ Objectif</h3>
        <p style="font-size: 1.3rem; margin-top: 1rem;">Tester le composant TaskEditComponent avec ses @Output</p>
    </div>

    <div class="alert alert-info">
        <strong>üìò Rappel :</strong> Le composant <code>TaskEditComponent</code> permet d'√©diter une t√¢che. Il √©met des √©v√©nements <code>@Output</code> quand on sauvegarde ou annule.
    </div>

    <h3 style="margin-top: 2rem;">Le composant TaskEditComponent</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 1.6; color: #1e293b;"><span style="color: #8b5cf6;">@Component</span>({
  selector: <span style="color: #059669;">'app-task-edit'</span>,
  template: <span style="color: #059669;">`
    &lt;div class="task-edit"&gt;
      &lt;h3&gt;√âditer la t√¢che&lt;/h3&gt;
      &lt;input #editInput [value]="title" /&gt;
      &lt;button (click)="save(editInput.value)"&gt;Sauvegarder&lt;/button&gt;
      &lt;button (click)="cancel()"&gt;Annuler&lt;/button&gt;
    &lt;/div&gt;
  `</span>
})
<span style="color: #0ea5e9;">export class</span> <span style="color: #8b5cf6;">TaskEditComponent</span> {
  <span style="color: #8b5cf6;">@Input</span>() title = <span style="color: #059669;">''</span>;
  <span style="color: #8b5cf6;">@Input</span>() taskId = <span style="color: #dc2626;">0</span>;
  <span style="color: #8b5cf6;">@Output</span>() onSave = <span style="color: #0ea5e9;">new</span> EventEmitter&lt;{id: <span style="color: #0ea5e9;">number</span>, title: <span style="color: #0ea5e9;">string</span>}&gt;();
  <span style="color: #8b5cf6;">@Output</span>() onCancel = <span style="color: #0ea5e9;">new</span> EventEmitter&lt;<span style="color: #0ea5e9;">void</span>&gt;();

  <span style="color: #8b5cf6;">save</span>(newTitle: <span style="color: #0ea5e9;">string</span>) {
    <span style="color: #0ea5e9;">if</span> (newTitle.trim()) {
      <span style="color: #0ea5e9;">this</span>.onSave.emit({ id: <span style="color: #0ea5e9;">this</span>.taskId, title: newTitle });
    }
  }

  <span style="color: #8b5cf6;">cancel</span>() {
    <span style="color: #0ea5e9;">this</span>.onCancel.emit();
  }
}</pre>
    </div>

    <h3 style="margin-top: 2rem;">Test du composant</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.7; color: #1e293b;"><span style="color: #0ea5e9;">import</span> { ComponentFixture, TestBed } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'@angular/core/testing'</span>;
<span style="color: #0ea5e9;">import</span> { TaskEditComponent } <span style="color: #0ea5e9;">from</span> <span style="color: #059669;">'./task-edit.component'</span>;

<span style="color: #8b5cf6;">fdescribe</span>(<span style="color: #059669;">'TaskEditComponent'</span>, () => {
  <span style="color: #0ea5e9;">let</span> component: TaskEditComponent;
  <span style="color: #0ea5e9;">let</span> fixture: ComponentFixture&lt;TaskEditComponent&gt;;

  <span style="color: #8b5cf6;">beforeEach</span>(<span style="color: #0ea5e9;">async</span> () => {
    <span style="color: #0ea5e9;">await</span> TestBed.configureTestingModule({
      imports: [TaskEditComponent]
    }).compileComponents();

    fixture = TestBed.createComponent(TaskEditComponent);
    component = fixture.componentInstance;
    component.title = <span style="color: #059669;">'T√¢che initiale'</span>;
    component.taskId = <span style="color: #dc2626;">1</span>;
    fixture.detectChanges();
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait √©mettre onSave avec les bonnes donn√©es'</span>, () => {
    <span style="color: #64748b;">// ARRANGE : Espionner l'√©v√©nement @Output</span>
    <span style="color: #0ea5e9;">let</span> savedData: any;
    component.onSave.subscribe((data) => {
      savedData = data;
    });

    <span style="color: #64748b;">// ACT : Appeler la m√©thode save</span>
    component.save(<span style="color: #059669;">'Nouvelle t√¢che'</span>);

    <span style="color: #64748b;">// ASSERT : V√©rifier les donn√©es √©mises</span>
    <span style="color: #8b5cf6;">expect</span>(savedData.id).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">1</span>);
    <span style="color: #8b5cf6;">expect</span>(savedData.title).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #059669;">'Nouvelle t√¢che'</span>);
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'devrait √©mettre onCancel quand on annule'</span>, () => {
    <span style="color: #64748b;">// ARRANGE : Espionner l'√©v√©nement @Output</span>
    <span style="color: #0ea5e9;">let</span> cancelled = <span style="color: #dc2626;">false</span>;
    component.onCancel.subscribe(() => {
      cancelled = <span style="color: #dc2626;">true</span>;
    });

    <span style="color: #64748b;">// ACT : Appeler la m√©thode cancel</span>
    component.cancel();

    <span style="color: #64748b;">// ASSERT : V√©rifier que l'√©v√©nement a √©t√© √©mis</span>
    <span style="color: #8b5cf6;">expect</span>(cancelled).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">true</span>);
  });

  <span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'ne devrait pas √©mettre onSave si le titre est vide'</span>, () => {
    <span style="color: #0ea5e9;">let</span> emitted = <span style="color: #dc2626;">false</span>;
    component.onSave.subscribe(() => {
      emitted = <span style="color: #dc2626;">true</span>;
    });

    component.save(<span style="color: #059669;">'   '</span>);  <span style="color: #64748b;">// Titre vide (espaces)</span>

    <span style="color: #8b5cf6;">expect</span>(emitted).<span style="color: #8b5cf6;">toBe</span>(<span style="color: #dc2626;">false</span>);
  });
});</pre>
    </div>

    <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107;">
        <strong>üí° Comprendre l'@Output dans les tests :</strong>
        <p style="margin-top: 10px;">S'abonner √† <code>component.onSave.subscribe(...)</code> dans le test, c'est comme si on √©crivait dans un template :</p>
        <pre style="background: white; padding: 10px; border-radius: 4px; margin-top: 10px;"><code>&lt;app-task-edit (onSave)="handleSave($event)"&gt;&lt;/app-task-edit&gt;</code></pre>
        <p style="margin-top: 10px;">Les deux √©coutent l'√©v√©nement √©mis par le composant enfant.</p>
    </div>

    <div class="alert alert-success">
        <strong>üîë Concepts cl√©s :</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li><code>component.onSave.subscribe()</code> : S'abonner √† l'√©v√©nement @Output</li>
            <li><code>.emit()</code> : Le composant √©met une valeur</li>
            <li>On teste que les bonnes donn√©es sont √©mises</li>
            <li>On teste aussi les cas limites (titre vide)</li>
        </ul>
    </div>

    <div class="alert alert-blue">
        <strong>üí° √Ä retenir :</strong> Les @Output sont des EventEmitter ‚Ä¢ On s'y abonne avec <code>.subscribe()</code> ‚Ä¢ On v√©rifie que les bonnes donn√©es sont √©mises
    </div>
</div>



           

            <!-- Slide  -->
            <div class="slide">
                <h2>Attention aux tests g√©n√©r√©s par le CLI</h2>
                
                <div style="background: #fef9c3; border: 3px solid #eab308; border-radius: 0.5rem; padding: 2rem; margin: 2rem 0;">
                    <h3 style="color: #92400e;">‚ö†Ô∏è Probl√®me courant</h3>
                    <p style="font-size: 1.2rem; margin-top: 1rem;">
                        Les tests auto-g√©n√©r√©s deviennent obsol√®tes d√®s que vous modifiez le template
                    </p>
                </div>
                
                <div style="background: #fee2e2; padding: 1.5rem; border-radius: 0.5rem; margin: 1rem 0;">
                    <strong style="color: #7f1d1d; font-size: 1.2rem;">‚ùå Exemple de test obsol√®te :</strong>
                    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin-top: 1rem;">
                        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.8; color: #1e293b;"><span style="color: #8b5cf6;">it</span>(<span style="color: #059669;">'should render title'</span>, () => {
            <span style="color: #0ea5e9;">const</span> compiled = fixture.nativeElement;
            <span style="color: #8b5cf6;">expect</span>(compiled.<span style="color: #8b5cf6;">querySelector</span>(<span style="color: #059669;">'.content span'</span>)?.textContent)
                .<span style="color: #8b5cf6;">toContain</span>(<span style="color: #059669;">'Hello, world'</span>);
            });</pre>
                    </div>
                    <p style="margin-top: 1rem; color: #7f1d1d;">
                        ‚Üí Ce test √©choue si votre template ne contient plus <code>.content span</code>
                    </p>
                </div>
                
                <div class="alert alert-green">
                    <strong>‚úÖ Solutions :</strong>
                    <ul style="margin-top: 0.5rem;">
                        <li>‚Ä¢ Adapter le test au template r√©el</li>
                        <li>‚Ä¢ Supprimer les tests non pertinents</li>
                        <li>‚Ä¢ √âcrire vos propres tests significatifs</li>
                    </ul>
                </div>
                
                <div style="background: #fef3c7; border-left: 8px solid #f59e0b; padding: 1.5rem; border-radius: 0 0.5rem 0.5rem 0; margin-top: 1.5rem;">
                    <strong style="color: #92400e;">üí° Conseil :</strong>
                    <p style="margin-top: 0.5rem; font-size: 1.1rem; color: #78350f;">
                        Ne gardez les tests CLI que s'ils testent vraiment votre logique m√©tier. Sinon, supprimez-les et √©crivez les v√¥tres.
                    </p>
                </div>
            </div>

      <!-- <!-- Slide 30 - Code Coverage -->
<div class="slide">
    <h2>Code Coverage - Couverture de tests</h2>
    
    <div class="exercise-box">
        <h3 style="color: white; font-size: 2rem;">üìä Objectif</h3>
        <p style="font-size: 1.3rem; margin-top: 1rem;">Mesurer quelle partie du code est test√©e</p>
    </div>

    <div class="alert alert-info">
        <strong>üîç Qu'est-ce que le Code Coverage ?</strong>
        <p style="margin-top: 10px;">Le <strong>code coverage</strong> (couverture de code) mesure le pourcentage de votre code qui est ex√©cut√© pendant les tests.</p>
    </div>

    <h3 style="margin-top: 2rem;">G√©n√©rer un rapport de couverture</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #64748b;"># Lancer les tests avec le rapport de couverture</span>
ng test --code-coverage

<span style="color: #64748b;"># Le rapport s'affiche dans la console et g√©n√®re un dossier coverage/</span></pre>
    </div>

    <h3 style="margin-top: 2rem;">üìä Exemple de rapport de couverture</h3>

    <div style="background: #1e1e1e; color: #d4d4d4; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0; font-family: 'Courier New', monospace;">
        <pre style="margin: 0; font-size: 0.9rem; line-height: 1.6;">=============================== Coverage summary ===============================
Statements   : 73.26% ( 74/101 )
Branches     : 40% ( 4/10 )
Functions    : 56.66% ( 17/30 )
Lines        : 70% ( 63/90 )
================================================================================</pre>
    </div>

    <h3 style="margin-top: 2rem;">üîç Explication ligne par ligne</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #e0f2fe; border-bottom: 2px solid #0ea5e9;">
                    <th style="padding: 12px; text-align: left; border: 1px solid #bae6fd;">M√©trique</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #bae6fd;">R√©sultat</th>
                    <th style="padding: 12px; text-align: left; border: 1px solid #bae6fd;">Explication</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 12px; border: 1px solid #e0e0e0; font-weight: bold;">Statements</td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;"><code>73.26% (74/101)</code></td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;">
                        <strong>Instructions de code test√©es</strong><br>
                        74 instructions sur 101 sont ex√©cut√©es pendant les tests<br>
                        <em>Ex: <code>const x = 5;</code>, <code>service.addTask();</code></em>
                    </td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #e0e0e0; font-weight: bold;">Branches</td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;"><code>40% (4/10)</code></td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;">
                        <strong>Chemins conditionnels test√©s</strong><br>
                        4 branches sur 10 sont test√©es<br>
                        <em>Ex: Dans <code>if (title.trim()) {...}</code>, teste-t-on le cas vrai ET le cas faux ?</em>
                    </td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #e0e0e0; font-weight: bold;">Functions</td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;"><code>56.66% (17/30)</code></td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;">
                        <strong>Fonctions/m√©thodes test√©es</strong><br>
                        17 fonctions sur 30 sont appel√©es pendant les tests<br>
                        <em>Ex: <code>addTask()</code>, <code>deleteTask()</code></em>
                    </td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td style="padding: 12px; border: 1px solid #e0e0e0; font-weight: bold;">Lines</td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;"><code>70% (63/90)</code></td>
                    <td style="padding: 12px; border: 1px solid #e0e0e0;">
                        <strong>Lignes de code test√©es</strong><br>
                        63 lignes sur 90 sont ex√©cut√©es<br>
                        <em>Similaire √† Statements mais compte les lignes physiques</em>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="alert alert-success">
        <strong>üí° Exemple concret :</strong>
        <pre style="margin-top: 10px; background: white; padding: 15px; border-radius: 4px;"><code>addTask(title: string): void {
  if (title.trim()) {        // ‚Üê BRANCH (2 chemins possibles)
    this.service.addTask(title);  // ‚Üê STATEMENT + LINE + dans FUNCTION
  }
}</code></pre>
        <ul style="margin-top: 15px; margin-left: 20px;">
            <li><strong>Statements :</strong> 2 instructions (<code>if</code> + <code>this.service.addTask()</code>)</li>
            <li><strong>Branches :</strong> 2 chemins (vrai/faux du <code>if</code>)</li>
            <li><strong>Functions :</strong> 1 fonction (<code>addTask</code>)</li>
            <li><strong>Lines :</strong> 3 lignes de code</li>
        </ul>
    </div>

    <div class="alert alert-warning">
        <strong>‚ö†Ô∏è Analyse de votre couverture :</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li>‚úÖ <strong>Statements (73.26%)</strong> : Bon niveau</li>
            <li>‚úÖ <strong>Lines (70%)</strong> : Acceptable</li>
            <li>‚ö†Ô∏è <strong>Functions (56.66%)</strong> : Moyen - beaucoup de fonctions non test√©es</li>
            <li>‚ùå <strong>Branches (40%)</strong> : Faible - peu de cas limites test√©s</li>
        </ul>
        <p style="margin-top: 15px;"><strong>Recommandation :</strong> Ajouter des tests pour les cas <code>if/else</code> non test√©s</p>
    </div>

    <div class="alert alert-blue">
        <strong>üéØ Objectifs de couverture recommand√©s :</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            <li><strong>Minimum acceptable :</strong> 70% de couverture globale</li>
            <li><strong>Bon niveau :</strong> 80%+</li>
            <li><strong>Excellent :</strong> 90%+</li>
        </ul>
        <p style="margin-top: 10px;"><strong>‚ö†Ô∏è Attention :</strong> 100% de couverture ne garantit pas z√©ro bug ! Un code peut √™tre ex√©cut√© sans que tous les cas soient test√©s.</p>
    </div>

    <h3 style="margin-top: 2rem;">üìÅ Rapport HTML d√©taill√©</h3>

    <div style="background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1.5rem; margin: 1.5rem 0;">
        <pre style="margin: 0; font-family: 'Courier New', monospace; font-size: 0.95rem; line-height: 1.8; color: #1e293b;"><span style="color: #64748b;"># Ouvrir le rapport HTML dans le navigateur</span>
open coverage/index.html

<span style="color: #64748b;"># Le rapport montre ligne par ligne ce qui est test√© (vert) ou non (rouge)</span></pre>
    </div>
</div>
        </div>
        
       <div class="navigation">
            <button id="prevBtn" onclick="changeSlide(-1)">‚Üê Pr√©c√©dent</button>
            <div class="indicators" id="indicators"></div>
            <button onclick="goToMenu()" style="background: #f59e0b; margin: 0 1rem;">üè† Menu</button>
            <button id="nextBtn" onclick="changeSlide(1)">Suivant ‚Üí</button>
        </div>
    </div>
    
   
    <script src="../navigation.js"></script>
    <script>
        initNavigation(21); // Slides 21-33
    </script>
</body>
</html>