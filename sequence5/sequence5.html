<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√©quence 5 - Performance & S√©curit√© Angular</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
        }

        .presentation-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .slide-counter {
            text-align: center;
            color: white;
            font-size: 1.2em;
            padding: 15px;
            font-weight: bold;
        }

        .slide {
            display: none;
            width: 90%;
            max-width: 1200px;
            margin: auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 60px;
            animation: slideIn 0.5s ease-out;
            overflow-y: auto;
            max-height: 80vh;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #667eea;
            font-size: 2.8em;
            margin-bottom: 30px;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
        }

        h2 {
            color: #764ba2;
            font-size: 2em;
            margin: 25px 0 15px 0;
        }

        h3 {
            color: #555;
            font-size: 1.5em;
            margin: 20px 0 10px 0;
        }

        h4 {
            color: #667eea;
            font-size: 1.3em;
            margin: 15px 0 10px 0;
        }

        p, li {
            font-size: 1.2em;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
        }

        .highlight {
            background: #fff3cd;
            padding: 20px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        code {
            background: #f4f4f4;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #c7254e;
            font-size: 0.95em;
        }

       pre {
            background: #f4f4f4;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
            border: 1px solid #ddd;
        }

        pre code {
            background: transparent;
            color: #333;        /* ‚Üê Chang√© de #f8f8f2 √† #333 */
            padding: 0;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
        }

        .controls button {
            background: white;
            color: #667eea;
            border: 2px solid white;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .controls button:hover:not(:disabled) {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .controls button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .date-badge {
            display: inline-block;
            background: #764ba2;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .emoji {
            font-size: 1.3em;
            margin-right: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            padding: 20px;
            border-radius: 10px;
        }

        .comparison-before {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        .comparison-after {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        strong {
            color: #667eea;
        }

        .score-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
            margin: 0 5px;
        }

        .score-excellent {
            background: #d4edda;
            color: #28a745;
        }

        .score-good {
            background: #fff3cd;
            color: #ffc107;
        }

        .score-poor {
            background: #f8d7da;
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <div class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">20</span>
        </div>

        <!-- Slide 1 -->
        <div class="slide active">
            <h1>üìä S√©quence 5</h1>
            <h2>Performance & S√©curit√© dans Angular</h2>
            <div class="date-badge">‚è±Ô∏è Dur√©e : 3h - 3h30</div>
            
            <div class="success-box">
                <h3>üéØ Objectifs de la s√©ance</h3>
                <p>√Ä la fin de cette s√©ance, vous serez capables de :</p>
                <ul>
                    <li><strong>Identifier</strong> les probl√®mes de performance dans une application Angular</li>
                    <li><strong>Utiliser</strong> Angular DevTools et Lighthouse pour auditer une app</li>
                    <li><strong>Mettre en ≈ìuvre</strong> des optimisations concr√®tes</li>
                    <li><strong>Comprendre</strong> et appliquer les bonnes pratiques de s√©curit√© front-end</li>
                    <li><strong>Pr√©venir</strong> les principales attaques : XSS, CSRF, injections</li>
                </ul>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="slide">
            <h1>‚ö° Qu'est-ce qu'un probl√®me de performance ?</h1>
            
            <div class="warning-box">
                <h3><span class="emoji">üêå</span> Sympt√¥mes d'une application lente</h3>
                <ul>
                    <li><strong>Temps de chargement</strong> : L'application met trop de temps √† d√©marrer</li>
                    <li><strong>Rendu lent</strong> : Les interactions utilisateur sont ralenties</li>
                    <li><strong>Change Detection excessive</strong> : Angular re-v√©rifie trop souvent</li>
                    <li><strong>DOM surcharg√©</strong> : Trop d'√©l√©ments HTML √† g√©rer</li>
                    <li><strong>Bundles lourds</strong> : Fichiers JavaScript trop volumineux</li>
                </ul>
            </div>

            <div class="highlight">
                <h3>üí° Exemples concrets dans TaskBoard Pro</h3>
                <ul>
                    <li>Liste de 1000 t√¢ches qui rame</li>
                    <li>Clic sur "Ajouter" qui prend 2 secondes</li>
                    <li>Toute la page se rafra√Æchit quand on modifie UNE seule t√¢che</li>
                    <li>Application de 5 Mo √† t√©l√©charger au d√©marrage</li>
                </ul>
            </div>

            <div class="info-box">
                <p><strong>R√®gle d'or :</strong> Une application performante = une meilleure exp√©rience utilisateur = plus de conversions !</p>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="slide">
            <h1>üîç Les causes fr√©quentes en Angular</h1>
            
            <div class="comparison">
                <div class="comparison-before">
                    <h3>‚ùå Probl√®me 1 : Change Detection par d√©faut</h3>
                    <p>Angular v√©rifie TOUS les composants √† CHAQUE √©v√©nement</p>
                    <pre><code>@Component({
  selector: 'app-tasks',
  // Pas de strat√©gie = Default (lent)
})</code></pre>
                    <p><strong>Impact :</strong> 100 composants v√©rifi√©s √† chaque clic !</p>
                </div>

                <div class="comparison-after">
                    <h3>‚úÖ Solution : OnPush</h3>
                    <p>Angular v√©rifie uniquement si les @Input changent</p>
                    <pre><code>@Component({
  selector: 'app-task-item',
  changeDetection: ChangeDetectionStrategy.OnPush
})</code></pre>
                    <p><strong>Gain :</strong> 99% de v√©rifications en moins !</p>
                </div>
            </div>

            <div class="warning-box">
                <h3>‚ùå Probl√®me 2 : ngFor sans trackBy</h3>
                <pre><code>@for (task of tasks; track task) {  // ‚ùå Sans ID
  &lt;li&gt;{{ task.title }}&lt;/li&gt;
}
// Angular recr√©e TOUS les &lt;li&gt; √† chaque changement</code></pre>
            </div>

            <div class="success-box">
                <h3>‚úÖ Solution : track par ID</h3>
                <pre><code>@for (task of tasks; track task.id) {  // ‚úÖ Avec ID
  &lt;li&gt;{{ task.title }}&lt;/li&gt;
}
// Angular ne recr√©e que ce qui a chang√©</code></pre>
            </div>
        </div>

        <!-- Slide 4 -->
        <div class="slide">
            <h1>üîé Audit de performance</h1>
            
            <div class="highlight" style="text-align: center; padding: 40px;">
                <h2 style="font-size: 2.5em; color: #667eea; margin-bottom: 20px;">
                    "On n'optimise pas sans mesurer !"
                </h2>
                <p style="font-size: 1.3em;">Il faut d'abord <strong>identifier les vrais probl√®mes</strong> avant d'optimiser.</p>
            </div>

            <div class="info-box">
                <h3>üìä Deux outils essentiels</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Outil</th>
                            <th>Usage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Angular DevTools</strong></td>
                            <td>Probl√®mes sp√©cifiques Angular (change detection, composants)</td>
                        </tr>
                        <tr>
                            <td><strong>Lighthouse</strong></td>
                            <td>Performance globale (chargement, bundle, images)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="success-box">
                <p><strong>M√©thodologie :</strong></p>
                <ol>
                    <li>Mesurer l'√©tat actuel</li>
                    <li>Identifier les goulots d'√©tranglement</li>
                    <li>Optimiser de mani√®re cibl√©e</li>
                    <li>Mesurer √† nouveau</li>
                    <li>R√©p√©ter jusqu'√† satisfaction</li>
                </ol>
            </div>
        </div>

        <!-- Slide 5 -->
        <div class="slide">
            <h1>üõ†Ô∏è Angular DevTools</h1>
            
            <div class="info-box">
                <h3>üì• Installation</h3>
                <ol>
                    <li>Ouvrir Chrome Web Store</li>
                    <li>Rechercher "Angular DevTools"</li>
                    <li>Cliquer sur "Ajouter √† Chrome"</li>
                    <li>Ouvrir DevTools: F12(Windows) ou Cmd + Option + I (Mac)‚Üí Onglet "Angular"</li>
                </ol>
            </div>

            <div class="success-box">
                <h3>‚ú® Fonctionnalit√©s principales</h3>
                <ul>
                    <li><strong>Profiler</strong> : Enregistre et analyse les cycles de change detection</li>
                    <li><strong>Components</strong> : Inspecte l'arbre des composants</li>
                    <li><strong>Injector Tree</strong> : Visualise les d√©pendances</li>
                </ul>
            </div>

            <div class="highlight">
                <h3>üéØ Cas pratique : D√©tecter un re-render inutile</h3>
                <ol>
                    <li>Ouvrir Angular DevTools ‚Üí Profiler</li>
                    <li>Cliquer sur "Record" ‚è∫Ô∏è</li>
                    <li>Faire une action (clic sur "Ajouter t√¢che")</li>
                    <li>Cliquer sur "Stop" ‚èπÔ∏è</li>
                    <li>Observer : combien de composants se sont rafra√Æchis ?</li>
                </ol>
                <p><strong>Question :</strong> Est-ce que TOUS les composants devaient se rafra√Æchir ?</p>
            </div>
        </div>

        <!-- Slide 6 -->
        <div class="slide">
            <h1>üí° Lighthouse (Chrome DevTools)</h1>
            
            <div class="info-box">
                <h3>üöÄ Lancer un audit Lighthouse</h3>
                <ol>
                    <li>Ouvrir Chrome DevTools (F12/ Cmd + option + i)</li>
                    <li>Onglet "Lighthouse"</li>
                    <li>Cocher "Performance"</li>
                    <li>Cliquer sur "Analyze page load"</li>
                </ol>
            </div>

            <div class="success-box">
                <h3>üìä Lire les scores</h3>
                <ul>
                    <li><span class="score-badge score-excellent">90-100</span> : Excellent ‚úÖ</li>
                    <li><span class="score-badge score-good">50-89</span> : √Ä am√©liorer ‚ö†Ô∏è</li>
                    <li><span class="score-badge score-poor">0-49</span> : Probl√®mes critiques ‚ùå</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>üîç M√©triques importantes</h3>
                <table>
                    <tbody>
                        <tr>
                            <td><strong>FCP</strong> (First Contentful Paint)</td>
                            <td>Temps avant le premier affichage</td>
                        </tr>
                        <tr>
                            <td><strong>LCP</strong> (Largest Contentful Paint)</td>
                            <td>Temps avant l'√©l√©ment principal</td>
                        </tr>
                        <tr>
                            <td><strong>TBT</strong> (Total Blocking Time)</td>
                            <td>Temps o√π la page est bloqu√©e</td>
                        </tr>
                        <tr>
                            <td><strong>CLS</strong> (Cumulative Layout Shift)</td>
                            <td>Stabilit√© visuelle</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="warning-box">
                <p><strong>‚ö†Ô∏è Attention :</strong> Lighthouse ‚â† v√©rit√© absolue. Toujours croiser avec Angular DevTools !</p>
            </div>
        </div>

        <!-- Slide 7 -->
        <div class="slide">
            <h1>üìà Exemple de rapport Lighthouse</h1>
            
            <div class="comparison">
                <div class="comparison-before">
                    <h3>‚ùå Avant optimisation</h3>
                    <p><strong>Performance :</strong> <span class="score-badge score-poor">45/100</span></p>
                    <ul>
                        <li>FCP : 3.2s</li>
                        <li>LCP : 5.8s</li>
                        <li>Bundle size : 2.8 MB</li>
                    </ul>
                    <p><strong>Probl√®mes identifi√©s :</strong></p>
                    <ul>
                        <li>üî¥ JavaScript bloquant : 1.2s</li>
                        <li>üî¥ Pas de lazy loading</li>
                        <li>üî¥ Images non optimis√©es</li>
                    </ul>
                </div>

                <div class="comparison-after">
                    <h3>‚úÖ Apr√®s optimisation</h3>
                    <p><strong>Performance :</strong> <span class="score-badge score-excellent">92/100</span></p>
                    <ul>
                        <li>FCP : 1.1s</li>
                        <li>LCP : 2.3s</li>
                        <li>Bundle size : 850 KB</li>
                    </ul>
                    <p><strong>Am√©liorations appliqu√©es :</strong></p>
                    <ul>
                        <li>‚úÖ Lazy loading des modules</li>
                        <li>‚úÖ OnPush change detection</li>
                        <li>‚úÖ Images optimis√©es (WebP)</li>
                    </ul>
                </div>
            </div>

            <div class="highlight">
                <h3>üéØ Gain de performance</h3>
                <p style="font-size: 1.5em; text-align: center;">
                    <strong>+47 points</strong> de score<br>
                    <strong>-70%</strong> de bundle size<br>
                    <strong>3x</strong> plus rapide !
                </p>
            </div>
        </div>

 <!-- Slide 8 -->
        <div class="slide">
            <h1>üéØ Optimisation 1 : OnPush</h1><div class="info-box">
  <h3>ü§î √Ä quoi sert OnPush ?</h3>
  <p>
    Par d√©faut, Angular relance la d√©tection de changements
    <strong>sur tous les composants</strong> √† chaque √©v√©nement
    (clic, timer, requ√™te HTTP‚Ä¶).
  </p>
  <p>
    <strong>OnPush</strong> permet de limiter ce travail en disant √† Angular :
    <em>¬´ ne v√©rifie ce composant que s‚Äôil a une bonne raison ¬ª</em>.
  </p>
  <p>
    R√©sultat :
    <strong>moins de calculs</strong>, moins de re-render,
    et une application plus fluide.
  </p>
</div>

    
            
            <div class="comparison">
                <div class="comparison-before">
                    <h3>‚ùå Par d√©faut (lent)</h3>
                    <p>Angular v√©rifie TOUS les composants √† CHAQUE √©v√©nement</p>
                    <pre><code>import { Component, Input } from '@angular/core';

@Component({
  selector: 'app-task-highlight',
  template: `
    &lt;div class="task-highlight"&gt;
      &lt;h3&gt;T√¢che mise en avant&lt;/h3&gt;
      &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;/div&gt;
  `
})
export class TaskHighlight {
  @Input() title = '';
}

// V√©rifi√© √† CHAQUE √©v√©nement de l'app !</code></pre>
                </div>

                <div class="comparison-after">
                    <h3>‚úÖ Avec OnPush (rapide)</h3>
                    <p>Angular v√©rifie uniquement si le @Input a chang√©</p>
                    <pre><code>import { Component, Input, ChangeDetectionStrategy } from '@angular/core';

@Component({
  selector: 'app-task-highlight',
  changeDetection: ChangeDetectionStrategy.OnPush,
  template: `
    &lt;div class="task-highlight"&gt;
      &lt;h3&gt;T√¢che mise en avant&lt;/h3&gt;
      &lt;h2&gt;{{ title }}&lt;/h2&gt;
    &lt;/div&gt;
  `
})
export class TaskHighlight {
  @Input() title = '';
}

// V√©rifi√© SEULEMENT si title change !</code></pre>
                </div>
            </div>

            <div class="success-box">
                <h3>üìä Gain de performance</h3>
                <p style="font-size: 1.3em; text-align: center;">
                    <strong>99%</strong> de v√©rifications en moins ! üöÄ
                </p>
            </div>
        </div>


<!-- Slide 9 - Quand utiliser OnPush -->
        <div class="slide">
            <h1>ü§î Quand utiliser OnPush dans TaskBoard Pro ?</h1>
            
            <div class="warning-box">
                <h3>‚ö†Ô∏è Ce qu'OnPush n'est PAS</h3>
                <p>
                    <strong>OnPush n'interdit pas l'√©tat interne</strong> et ne bloque pas les mises √† jour.<br>
                    Il modifie uniquement <strong>quand Angular relance la d√©tection</strong> pour ce composant.
                </p>
            </div>

            <div class="success-box">
                <h3>‚úÖ Dans TaskBoard Pro, mettre OnPush sur :</h3>
                
                <h4>1Ô∏è‚É£ TaskHighlight </h4>
                <pre><code>@Component({
  selector: 'app-task-highlight',
  changeDetection: ChangeDetectionStrategy.OnPush, // ‚úÖ
})
export class TaskHighlight {
  @Input() title = '';  // Ne d√©pend QUE de cet @Input
}</code></pre>
                <p><strong>Pourquoi ?</strong> Composant pur de pr√©sentation, pas d'√©tat interne</p>

                <h4>2Ô∏è‚É£ TasksPage</h4>
                <pre><code>@Component({
  selector: 'app-tasks-page',
  changeDetection: ChangeDetectionStrategy.OnPush, // ‚úÖ
})
export class TasksPage {
  tasks$ = this.taskService.tasks$; // Observable avec | async
  
  addTask(title: string): void {
    this.taskService.addTask(title); // √âv√©nement d√©clenche d√©tection
  }
}</code></pre>
                <p><strong>Pourquoi ?</strong> Utilise des Observables + les clics d√©clenchent automatiquement la d√©tection</p>

                <h4>3Ô∏è‚É£ TaskEditComponent (√† ajouter)</h4>
                <pre><code>@Component({
  selector: 'app-task-edit',
  changeDetection: ChangeDetectionStrategy.OnPush, // ‚Üê √Ä AJOUTER
})
export class TaskEditComponent {
  @Input() title = '';
  @Input() taskId = 0;
  @Output() onSave = new EventEmitter&lt;{id: number, title: string}&gt;();
  
  save(newTitle: string) {
    this.onSave.emit({ id: this.taskId, title: newTitle });
  }
}</code></pre>
                <p><strong>Pourquoi ?</strong> Pattern @Input/@Output pur, pas de modification interne</p>
            </div>

       

            <div class="info-box">
                <h3>üîë Angular re-v√©rifie un composant OnPush quand :</h3>
                <ul>
                    <li><strong>Un @Input change de r√©f√©rence</strong>
                        <pre><code>// Dans TaskService
this.tasksSubject.next([...currentTasks, newTask]); // ‚úÖ Nouvelle r√©f√©rence</code></pre>
                    </li>
                    <li><strong>Un √©v√©nement vient du composant</strong>
                        <pre><code>// Dans TasksPage
&lt;button (click)="addTask(title)"&gt; // ‚úÖ Clic d√©clenche d√©tection</code></pre>
                    </li>
                    <li><strong>Un Observable √©met via | async</strong>
                        <pre><code>// Dans le template
@if (tasks$ | async; as tasks) { ... } // ‚úÖ Auto-d√©tection</code></pre>
                    </li>
                </ul>
            </div>

            <div class="highlight">
                <h3>üéØ R√®gle d'or pour TaskBoard Pro</h3>
                <p style="font-size: 1.3em; text-align: center;">
                    <strong>OnPush marche parfaitement si le composant :<br>
                    ‚Ä¢ Re√ßoit des donn√©es via @Input / Observable<br>
                    ‚Ä¢ √âmet des √©v√©nements via @Output / clics<br>
                    ‚Ä¢ Ne manipule PAS le DOM dynamiquement (ViewContainerRef)</strong>
                </p>
            </div>
        </div>


   <!-- Slide 10 -->
<div class="slide">
  <h1>üéØ Optimisation 2 : trackBy</h1>

  <div class="info-box">
  <h3>ü§î √Ä quoi sert trackBy ?</h3>
  <p>
    Quand Angular affiche une liste, il doit d√©cider
    <strong>quel √©l√©ment correspond √† quel item de donn√©es</strong>.
  </p>
  <p>
    <strong>Sans trackBy</strong>, Angular compare les √©l√©ments par leur position
    et peut recr√©er inutilement le DOM.
  </p>
  <p>
    <strong>Avec trackBy</strong>, Angular utilise une <em>cl√© stable</em> (ex : <code>id</code>)
    pour mettre √† jour uniquement les √©l√©ments qui ont r√©ellement chang√©.
  </p>
</div>

  <div class="comparison">
    <div class="comparison-before">
      <h3>‚ùå Sans trackBy (lent)</h3>
      <p>Angular ne sait pas identifier les √©l√©ments ‚Üí recr√©ation inutile du DOM</p>
      <pre><code>@for (task of tasks) {
  &lt;li&gt;{{ task.title }}&lt;/li&gt;
}

// Si on ajoute 1 t√¢che
// ‚Üí Angular retravaille toute la liste</code></pre>
    </div>

    <div class="comparison-after">
      <h3>‚úÖ Avec trackBy (rapide)</h3>
      <p>Angular identifie chaque √©l√©ment gr√¢ce √† une cl√© stable</p>
      <pre><code>@for (task of tasks; track task.id) {
  &lt;li&gt;{{ task.title }}&lt;/li&gt;
}

// Si on ajoute 1 t√¢che
// ‚Üí Angular met √† jour 1 seul √©l√©ment</code></pre>
    </div>
  </div>

  <div class="success-box">
    <h3>üìä Impact sur une liste de 1000 t√¢ches</h3>
    <p>
      <strong>trackBy est indispensable avec OnPush</strong> pour √©viter
      des recalculs inutiles.
    </p>
    <ul>
      <li><strong>Sans trackBy :</strong> recalcul global de la liste</li>
      <li><strong>Avec trackBy :</strong> mise √† jour cibl√©e</li>
      <li><strong>Gain :</strong> performances fortement am√©lior√©es üöÄ</li>
    </ul>
  </div>
</div>

        <!-- Slide 11 -->
        <div class="slide">
            <h1>üîí S√©curit√© c√¥t√© front-end</h1>
            
            <div class="warning-box">
                <h3>‚ö†Ô∏è Pourquoi le front est une surface d'attaque ?</h3>
                <ul>
                    <li><strong>Donn√©es utilisateur</strong> : Input, formulaires, URLs</li>
                    <li><strong>APIs externes</strong> : Appels HTTP, webhooks</li>
                    <li><strong>DOM manipul√© dynamiquement</strong> : innerHTML, scripts</li>
                    <li><strong>Code client visible</strong> : Tout peut √™tre inspect√©</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>üõ°Ô∏è Les 3 principales menaces front-end</h3>
                <ol style="font-size: 1.3em; line-height: 2;">
                    <li><strong>XSS</strong> (Cross-Site Scripting)</li>
                    <li><strong>CSRF</strong> (Cross-Site Request Forgery)</li>
                    <li><strong>Injection de code</strong></li>
                </ol>
            </div>

            <div class="highlight">
                <h3>üí° R√®gle fondamentale</h3>
                <p style="font-size: 1.5em; text-align: center; font-weight: bold;">
                    "Ne jamais faire confiance aux donn√©es utilisateur"
                </p>
            </div>
        </div>

        <!-- Slide 12 -->
        <div class="slide">
            <h1>‚ö†Ô∏è XSS (Cross-Site Scripting)</h1>
            
            <div class="warning-box">
                <h3>üî¥ Principe de l'attaque XSS</h3>
                <p>Un attaquant injecte du code JavaScript malveillant dans votre application</p>
                <pre><code>// Exemple d'input malveillant
const maliciousInput = '&lt;script&gt;alert("Hack√©!")&lt;/script&gt;';

// Si affich√© sans protection :
&lt;div&gt;{{ maliciousInput }}&lt;/div&gt;
// ‚Üí Le script s'ex√©cute !</code></pre>
            </div>

            <div class="highlight">
                <h3>üí° Exemple concret dans TaskBoard</h3>
                <pre><code>// Un utilisateur ajoute une "t√¢che" malveillante :
addTask('&lt;img src=x onerror="alert(document.cookie)"&gt;');

// Si affich√© sans protection, le script vole les cookies !</code></pre>
            </div>

            <div class="info-box">
                <h3>üéØ Types de XSS</h3>
                <ul>
                    <li><strong>Stored XSS</strong> : Le code est stock√© dans la base de donn√©es</li>
                    <li><strong>Reflected XSS</strong> : Le code est dans l'URL</li>
                    <li><strong>DOM-based XSS</strong> : Le code manipule le DOM directement</li>
                </ul>
            </div>
        </div>

        <!-- Slide 13 -->
        <div class="slide">
            <h1>üõ°Ô∏è Protection XSS dans Angular</h1>
            
            <div class="success-box">
                <h3>‚úÖ Angular prot√®ge automatiquement !</h3>
                <p>Avec l'interpolation normale, Angular √©chappe le HTML</p>
                <pre><code>// Code malveillant
task.title = '&lt;script&gt;alert("Hack√©")&lt;/script&gt;';

// Dans le template Angular
&lt;div&gt;{{ task.title }}&lt;/div&gt;

// R√©sultat affich√© (texte brut, pas ex√©cut√©) :
// &lt;script&gt;alert("Hack√©")&lt;/script&gt;</code></pre>
                <p>‚úÖ Le script n'est PAS ex√©cut√©, il est affich√© comme du texte !</p>
            </div>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Danger avec innerHTML</h3>
                <pre><code>// ‚ùå DANGEREUX : innerHTML ex√©cute le code !
&lt;div [innerHTML]="task.description"&gt;&lt;/div&gt;

// Si task.description contient un script, il s'ex√©cute !</code></pre>
            </div>

            <div class="info-box">
                <h3>üîß Solution : DomSanitizer</h3>
                <pre><code>import { DomSanitizer } from '@angular/platform-browser';

export class TaskComponent {
  private sanitizer = inject(DomSanitizer);

  getSafeHtml(html: string) {
    return this.sanitizer.sanitize(SecurityContext.HTML, html);
  }
}

// Dans le template
&lt;div [innerHTML]="getSafeHtml(task.description)"&gt;&lt;/div&gt;</code></pre>
            </div>
        </div>

        <!-- Slide 14 -->
        <div class="slide">
            <h1>‚úÖ Bonnes pratiques XSS</h1>
            
            <div class="success-box">
                <h3>üéØ Ce qu'il faut TOUJOURS faire</h3>
                <ol style="font-size: 1.2em; line-height: 2;">
                    <li><strong>Utiliser l'interpolation normale</strong>
                        <pre><code>‚úÖ {{ task.title }}  &lt;!-- S√©curis√© par d√©faut --&gt;</code></pre>
                    </li>
                    <li><strong>√âviter innerHTML autant que possible</strong>
                        <pre><code>‚ùå [innerHTML]="..."  &lt;!-- Dangereux --&gt;
‚úÖ {{ ... }}           &lt;!-- Pr√©f√©rable --&gt;</code></pre>
                    </li>
                    <li><strong>Valider c√¥t√© serveur AUSSI</strong>
                        <pre><code>// Le front n'est PAS suffisant !
// Le back doit AUSSI valider les donn√©es</code></pre>
                    </li>
                </ol>
            </div>

            <div class="warning-box">
                <h3>üî¥ Ce qu'il ne faut JAMAIS faire</h3>
                <ul style="font-size: 1.2em;">
                    <li>‚ùå Utiliser <code>bypassSecurityTrustHtml()</code> sans raison valide</li>
                    <li>‚ùå D√©sactiver la protection Angular</li>
                    <li>‚ùå Faire confiance aux donn√©es utilisateur</li>
                    <li>‚ùå Penser que le front suffit pour la s√©curit√©</li>
                </ul>
            </div>
        </div>

        <!-- Slide 15 -->
        <div class="slide">
            <h1>üîí CSRF (Cross-Site Request Forgery)</h1>
            
            <div class="warning-box">
                <h3>üî¥ Principe de l'attaque CSRF</h3>
                <p>Un site malveillant force l'utilisateur √† faire une action non d√©sir√©e sur VOTRE site</p>
                <pre><code>1. Utilisateur connect√© sur taskboard.com (session active)
2. Visite site-malveillant.com
3. site-malveillant.com contient :
   &lt;img src="https://taskboard.com/api/tasks/delete/123"&gt;
4. Le navigateur envoie la requ√™te AVEC les cookies
5. La t√¢che est supprim√©e sans que l'utilisateur le veuille !</code></pre>
            </div>

            <div class="info-box">
                <h3>üõ°Ô∏è Protection CSRF</h3>
                <p><strong>Solution :</strong> Utiliser des tokens CSRF</p>
                <ol>
                    <li>Le serveur g√©n√®re un token unique par session</li>
                    <li>Le token est envoy√© dans chaque requ√™te</li>
                    <li>Le serveur v√©rifie que le token est valide</li>
                    <li>Les requ√™tes externes n'ont pas le token ‚Üí rejet√©es</li>
                </ol>
            </div>

            <div class="success-box">
                <h3>‚úÖ Angular HttpClient prot√®ge automatiquement</h3>
                <pre><code>// Angular ajoute automatiquement le header X-XSRF-TOKEN
this.http.post('/api/tasks', task).subscribe(...)

// Le serveur v√©rifie le token c√¥t√© back</code></pre>
            </div>
        </div>

        <!-- Slide 16 -->
        <div class="slide">
            <h1>üîí Content Security Policy (CSP)</h1>
            
            <div class="info-box">
                <h3>üéØ Qu'est-ce qu'une CSP ?</h3>
                <p>Une <strong>Content Security Policy</strong> est un m√©canisme de s√©curit√© qui limite les sources de contenu autoris√©es</p>
                <p>Elle se configure via un header HTTP :</p>
                <pre><code>Content-Security-Policy: 
  default-src 'self'; 
  script-src 'self' https://cdn.example.com; 
  style-src 'self' 'unsafe-inline';</code></pre>
            </div>

            <div class="success-box">
                <h3>üõ°Ô∏è Ce que bloque une CSP</h3>
                <ul>
                    <li>‚úÖ Scripts inline malveillants</li>
                    <li>‚úÖ Scripts externes non autoris√©s</li>
                    <li>‚úÖ Styles inline dangereux</li>
                    <li>‚úÖ Ressources de domaines non autoris√©s</li>
                </ul>
            </div>

            <div class="highlight">
                <h3>üí° Exemple concret</h3>
                <pre><code>// Avec CSP : script-src 'self'

// ‚úÖ Autoris√© (m√™me domaine)
&lt;script src="/assets/app.js"&gt;&lt;/script&gt;

// ‚ùå Bloqu√© (domaine externe)
&lt;script src="https://malicious.com/evil.js"&gt;&lt;/script&gt;

// ‚ùå Bloqu√© (script inline)
&lt;script&gt;alert("Hack√©")&lt;/script&gt;</code></pre>
            </div>
        </div>

        <!-- Slide 17 -->
        <div class="slide">
            <h1>üîß CSP avec Angular</h1>
            
            <div class="success-box">
                <h3>‚úÖ Configuration CSP compatible Angular</h3>
                <pre><code>Content-Security-Policy:
  default-src 'self';
  script-src 'self';
  style-src 'self' 'unsafe-inline';  &lt;!-- Angular a besoin de styles inline --&gt;
  img-src 'self' data: https:;
  font-src 'self' data:;</code></pre>
            </div>

            <div class="info-box">
                <h3>üîß Configuration c√¥t√© serveur (exemple Node.js)</h3>
                <pre><code>// express.js
app.use((req, res, next) => {
  res.setHeader(
    'Content-Security-Policy',
    "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
  );
  next();
});</code></pre>
            </div>

            <div class="highlight">
                <h3>üí° Tester votre CSP</h3>
                <ol>
                    <li>Ouvrir DevTools ‚Üí Console</li>
                    <li>Les violations CSP apparaissent en rouge</li>
                    <li>Ajuster la politique selon les besoins</li>
                </ol>
            </div>
        </div>

        <!-- Slide 18 -->
        <div class="slide">
            <h1>üìã R√©capitulatif S√©curit√©</h1>
            
            <div class="success-box">
                <h3>‚úÖ Ce qu'Angular fait pour vous</h3>
                <table>
                    <tbody>
                        <tr>
                            <td style="width: 25%; font-weight: bold;">XSS</td>
                            <td>Protection automatique avec {{ }}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">CSRF</td>
                            <td>Tokens automatiques avec HttpClient</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Sanitization</td>
                            <td>DomSanitizer pour nettoyer le HTML</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Ce que VOUS devez faire</h3>
                <ul>
                    <li>‚úÖ Ne jamais utiliser innerHTML sans raison valide</li>
                    <li>‚úÖ Valider les donn√©es c√¥t√© serveur AUSSI</li>
                    <li>‚úÖ Configurer une CSP stricte</li>
                    <li>‚úÖ Ne jamais faire confiance aux donn√©es utilisateur</li>
                    <li>‚úÖ Tester r√©guli√®rement la s√©curit√©</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>üí° R√®gles d'or</h3>
                <ol style="font-size: 1.2em; line-height: 2;">
                    <li><strong>Le front n'est jamais s√ªr √† 100%</strong> ‚Üí S√©curiser le back</li>
                    <li><strong>Angular aide, mais ne fait pas tout</strong> ‚Üí Restez vigilant</li>
                    <li><strong>La s√©curit√© est une mentalit√©</strong> ‚Üí Penser s√©curit√© d√®s la conception</li>
                </ol>
            </div>
        </div>

        <!-- Slide 19 -->
        <div class="slide">
            <h1>üõ†Ô∏è Atelier pratique guid√©</h1>
            
            <div class="info-box">
                <h3>üìã Partie 1 : Audit de performance (30 min)</h3>
                <ol>
                    <li><strong>Installer Angular DevTools</strong>
                        <ul><li>Chrome Web Store ‚Üí "Angular DevTools"</li></ul>
                    </li>
                    <li><strong>Lancer un profiling</strong>
                        <ul>
                            <li>DevTools ‚Üí Angular ‚Üí Profiler</li>
                            <li>Enregistrer une action (ajouter une t√¢che)</li>
                            <li>Identifier combien de composants se rafra√Æchissent</li>
                        </ul>
                    </li>
                    <li><strong>Audit Lighthouse</strong>
                        <ul>
                            <li>DevTools ‚Üí Lighthouse ‚Üí Performance</li>
                            <li>Noter le score actuel</li>
                            <li>Identifier les probl√®mes principaux</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="success-box">
                <h3>üîß Partie 2 : Optimisations (30 min)</h3>
                <ol>
                    <li>Ajouter OnPush sur TasksPageComponent</li>
                    <li>V√©rifier trackBy dans toutes les boucles @for</li>
                    <li>Relancer Lighthouse et comparer les scores</li>
                </ol>
            </div>

            <div class="warning-box">
                <h3>üîí Partie 3 : Audit de s√©curit√© (20 min)</h3>
                <ol>
                    <li>Chercher les innerHTML dans le code</li>
                    <li>V√©rifier qu'aucun script inline n'est utilis√©</li>
                    <li>Tester l'ajout d'une t√¢che avec du HTML malveillant</li>
                </ol>
            </div>
        </div>

        <!-- Slide 20 -->
        <div class="slide">
            <h1>üìö Synth√®se de la s√©quence</h1>
            
            <div class="success-box">
                <h3>‚ö° Performance : Les 5 r√®gles d'or</h3>
                <ol style="font-size: 1.2em; line-height: 2;">
                    <li><strong>Mesurer avant d'optimiser</strong> (DevTools + Lighthouse)</li>
                    <li><strong>OnPush sur les composants</strong> (r√©duit les v√©rifications)</li>
                    <li><strong>trackBy dans les listes</strong> (optimise le DOM)</li>
                    <li><strong>Lazy Loading</strong> (r√©duit le bundle initial)</li>
                    <li><strong>D√©couper en composants</strong> (facilite l'optimisation)</li>
                </ol>
            </div>

            <div class="info-box">
                <h3>üîí S√©curit√© : Les 5 commandements</h3>
                <ol style="font-size: 1.2em; line-height: 2;">
                    <li><strong>Ne jamais faire confiance aux donn√©es utilisateur</strong></li>
                    <li><strong>Utiliser {{ }} au lieu de innerHTML</strong></li>
                    <li><strong>Valider c√¥t√© serveur AUSSI</strong></li>
                    <li><strong>Configurer une CSP stricte</strong></li>
                    <li><strong>Tester r√©guli√®rement</strong></li>
                </ol>
            </div>

            <div class="highlight" style="text-align: center; padding: 40px;">
                <h2 style="font-size: 2em; color: #667eea;">
                    "Performance = Conception + Mesure"<br>
                    "S√©curit√© = Bonnes pratiques + Vigilance"<br>
                    "Angular aide, mais ne fait pas tout seul"
                </h2>
            </div>
        </div>

        <div class="controls">
            <button id="prev-btn">‚Üê Pr√©c√©dent</button>
            <button id="next-btn">Suivant ‚Üí</button>
        </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const currentSlideSpan = document.getElementById('current-slide');
        const totalSlidesSpan = document.getElementById('total-slides');

        totalSlidesSpan.textContent = totalSlides;

        function showSlide(n) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[n].classList.add('active');
            currentSlideSpan.textContent = n + 1;
            
            prevBtn.disabled = n === 0;
            nextBtn.disabled = n === totalSlides - 1;
            
            slides[n].scrollTop = 0;
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        nextBtn.addEventListener('click', nextSlide);
        prevBtn.addEventListener('click', prevSlide);

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextSlide();
            if (e.key === 'ArrowLeft') prevSlide();
        });

        showSlide(0);
    </script>
</body>
</html>